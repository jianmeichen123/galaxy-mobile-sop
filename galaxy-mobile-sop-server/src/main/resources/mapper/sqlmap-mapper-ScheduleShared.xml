<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.galaxyinternet.rili.model.ScheduleShared">


	<resultMap id="BaseResultMap" type="com.galaxyinternet.rili.model.ScheduleShared" >
		<id 	column="id" 			property="id" 			jdbcType="BIGINT" />
		<result column="to_uid" 		property="toUid" 		jdbcType="BIGINT" />
		<result column="department_id" 	property="departmentId" jdbcType="BIGINT" />
		<result column="create_uid" 	property="createUid" 	jdbcType="BIGINT" />
		<result column="created_time" 	property="createdTime" 	jdbcType="BIGINT" />
	</resultMap>



	<sql id="Base_Column_List">
		id, to_uid, department_id, create_uid,created_time
	</sql>


	<sql id="Base_Where_Clause">
		<where>
			<trim prefixOverrides="and">
				<if test="id != null"> and id = #{id ,jdbcType=BIGINT} </if>
				<if test="toUid != null" > and to_uid = #{toUid ,jdbcType=BIGINT}  </if>
				<if test="departmentId != null" > and department_id = #{departmentId ,jdbcType=BIGINT}  </if>
				<if test="createUid != null" > and create_uid = #{createUid ,jdbcType=BIGINT}  </if>
				<if test="createdTime != null" > and created_time = #{createdTime ,jdbcType=BIGINT}  </if>
				
			</trim>
			
			<if test="sorting != null">order by ${sorting}</if>
			<if test="property != null">order by ${property} ${direction}</if>
			
			<if test="offset != null and limit != null">
				limit #{offset}, #{limit}
			</if>
		</where>
	</sql>


	<insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="com.galaxyinternet.rili.model.ScheduleShared">
	    <![CDATA[
	    insert into schedule_shared (id, to_uid, department_id, 
	      create_uid,created_time
	      )
	    values (#{id,jdbcType=BIGINT}, #{toUid,jdbcType=BIGINT}, #{departmentId,jdbcType=BIGINT}, 
	      #{createUid,jdbcType=BIGINT}, #{createdTime,jdbcType=BIGINT}
	      )
	    ]]>
	</insert>
	
				
				
	<!-- 查询总数 -->
	<select id="selectCount" resultType="java.lang.Long" parameterType="java.util.Map">
		select count(id) from schedule_shared
		<include refid="Base_Where_Clause" />
	</select>



	<!-- 查询 -->
	<select id="select" resultMap="BaseResultMap" parameterType="java.util.Map">
		select
		<include refid="Base_Column_List" />
		from schedule_shared
		<include refid="Base_Where_Clause" />
	</select>


	<!-- 根据ID查询 -->
	<select id="selectById" resultMap="BaseResultMap" parameterType="java.lang.Long">
		select
		<include refid="Base_Column_List" />
		from schedule_shared 
		where id = #{id}
	</select>
	
	
	<!-- 通过ID更新 -->
	<update id="updateById" parameterType="com.galaxyinternet.rili.model.ScheduleShared">
		update schedule_shared
		<set>
			<if test="toUid != null" > to_uid = #{toUid,jdbcType=BIGINT}, </if>
			<if test="departmentId != null" > department_id = #{departmentId,jdbcType=BIGINT}, </if>
			<if test="createUid != null" > create_uid = #{createUid,jdbcType=BIGINT}, </if>
			<if test="createdTime != null" > created_time = #{createdTime,jdbcType=BIGINT}, </if>
		</set>
		where id = #{id}
	</update>
	
	
	<!-- 删除 -->
	<delete id="delete" parameterType="java.util.Map">
		delete from schedule_shared
		<include refid="Base_Where_Clause" />
	</delete>
	
	
	
	<!-- 根据ID删除 -->
	<delete id="deleteById" parameterType="java.lang.Long">
		delete from schedule_shared
		where id = #{id}
	</delete>
	
	
<!-- 查询出部门共享人id -->
	<select id="selectByUserId" resultType="java.lang.Long" parameterType="java.util.Map">
		select
			schedule_shared.to_uid
		from schedule_shared
		<include refid="Base_Where_Clause" />
	</select>
	
	
</mapper>
	