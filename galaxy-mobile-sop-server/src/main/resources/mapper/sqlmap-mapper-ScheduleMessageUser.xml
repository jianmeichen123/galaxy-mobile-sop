<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.galaxyinternet.rili.model.ScheduleMessageUser">

	<resultMap id="BaseResultMap" type="com.galaxyinternet.rili.model.ScheduleMessageUser" >
		<id 	column="id" 			property="id" 			jdbcType="BIGINT" />
		<result column="mid" 			property="mid" 			jdbcType="BIGINT" />
		<result column="uid" 			property="uid" 			jdbcType="BIGINT" />
		<result column="uname" 			property="uname" 		jdbcType="VARCHAR" />
		<result column="type_role" 		property="typeRole" 	jdbcType="TINYINT" />
		<result column="is_use" 		property="isUse" 		jdbcType="TINYINT" />
		<result column="is_send" 		property="isSend" 		jdbcType="TINYINT" />
		<result column="is_read" 		property="isRead" 		jdbcType="TINYINT" />
		<result column="is_del" 		property="isDel" 		jdbcType="TINYINT" />
		<result column="created_time" 	property="createdTime" jdbcType="BIGINT" />
		<result column="updated_time" 	property="updatedTime" jdbcType="BIGINT" />
		
		<result column="type" 			property="type" 		jdbcType="VARCHAR" />
		<result column="remrk_id" 		property="remarkId" 	jdbcType="BIGINT" />
		<result column="content" 		property="content" 		jdbcType="VARCHAR" />
		<result column="send_time" 		property="sendTime" 	jdbcType="BIGINT" />
	</resultMap>


	<sql id="Base_Column_List">
		id, mid, uid, uname, type_role, is_use, is_send, is_read, is_del, created_time, updated_time
	</sql>



	<sql id="Base_Where_Clause">
		<where>
			<trim prefixOverrides="and">
				<if test="id != null"> and id = #{id ,jdbcType=BIGINT} </if>
				<if test="ids != null">
					and id IN
					<foreach collection="ids" index="atem" item="atem" open="(" separator="," close=")">
						#{atem}
					</foreach>
				</if> 
				
				<if test="mid != null" > and mid = #{mid ,jdbcType=BIGINT}  </if>
				
				<if test="mids != null">
					and mid IN
					<foreach collection="mids" index="item" item="item" open="(" separator="," close=")">
						#{item}
					</foreach>
				</if> 
				
				<if test="uid != null" > and uid = #{uid ,jdbcType=BIGINT}  </if>
				<if test="uname != null" > and uname = #{uname ,jdbcType=VARCHAR}  </if>
				<if test="typeRole != null" > and type_role = #{typeRole ,jdbcType=TINYINT}  </if>
				<if test="isUse != null" > and is_use = #{isUse ,jdbcType=TINYINT}  </if>
				<if test="isSend != null" > and is_send = #{isSend ,jdbcType=TINYINT}  </if>
				<if test="isRead != null" > and is_read = #{isRead ,jdbcType=TINYINT}  </if>
				<if test="isDel != null" > and is_del = #{isDel ,jdbcType=TINYINT}  </if>
				<if test="createdTime != null" > and created_time = #{createdTime ,jdbcType=BIGINT}  </if>
				<if test="updatedTime != null" > and updated_time = #{updatedTime ,jdbcType=BIGINT}  </if>
				
			</trim>

			<if test="sorting != null">order by ${sorting}</if>
			
			<if test="offset != null and limit != null">
				limit #{offset}, #{limit}
			</if>
		</where>
	</sql>


	<insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="com.galaxyinternet.rili.model.ScheduleMessageUser">
	    <![CDATA[
	    insert into schedule_message_user (id, mid, uid, uname, 
	      type_role, is_use, is_send, 
	      is_read, is_del, created_time, 
	      updated_time)
	    values (#{id,jdbcType=BIGINT}, #{mid,jdbcType=BIGINT}, #{uid,jdbcType=BIGINT}, #{uname,jdbcType=VARCHAR}, 
	      #{typeRole,jdbcType=TINYINT}, #{isUse,jdbcType=TINYINT}, #{isSend,jdbcType=TINYINT}, 
	      #{isRead,jdbcType=TINYINT}, #{isDel,jdbcType=TINYINT}, #{createdTime,jdbcType=BIGINT}, 
	      #{updatedTime,jdbcType=BIGINT})
	    ]]>
	</insert>
	
				
				
	<!-- 查询总数 -->
	<select id="selectCount" resultType="java.lang.Long" parameterType="java.util.Map">
		select count(id) from schedule_message_user
		<include refid="Base_Where_Clause" />
	</select>



	<!-- 查询 -->
	<select id="select" resultMap="BaseResultMap" parameterType="java.util.Map">
		select
		<include refid="Base_Column_List" />
		from schedule_message_user
		<include refid="Base_Where_Clause" />
	</select>


	<!-- 根据ID查询 -->
	<select id="selectById" resultMap="BaseResultMap" parameterType="java.lang.Long">
		select
		<include refid="Base_Column_List" />
		from schedule_message_user 
		where id = #{id}
	</select>
	
	
	<!-- 通过ID更新 -->
	<update id="updateById" parameterType="com.galaxyinternet.rili.model.ScheduleMessageUser">
		update schedule_message_user
		<set>
			<if test="mid != null" > mid = #{mid,jdbcType=BIGINT}, </if>
			<if test="uid != null" > uid = #{uid,jdbcType=BIGINT}, </if>
			<if test="uname != null" > uname = #{uname,jdbcType=VARCHAR}, </if>
			<if test="typeRole != null" > type_role = #{typeRole,jdbcType=TINYINT}, </if>
			<if test="isUse != null" > is_use = #{isUse,jdbcType=TINYINT}, </if>
			<if test="isSend != null" > is_send = #{isSend,jdbcType=TINYINT}, </if>
			<if test="isRead != null" > is_read = #{isRead,jdbcType=TINYINT}, </if>
			<if test="isDel != null" > is_del = #{isDel,jdbcType=TINYINT}, </if>
			<if test="createdTime != null" > created_time = #{createdTime,jdbcType=BIGINT}, </if>
			<if test="updatedTime != null" > updated_time = #{updatedTime,jdbcType=BIGINT}, </if>
		</set>
		where id = #{id}
	</update>
	
	<update id="updateByIdSelective" parameterType="com.galaxyinternet.rili.model.ScheduleMessageUser">
		update schedule_message_user
		<set>
			<if test="isUse != null" > is_use = #{isUse,jdbcType=TINYINT}, </if>
			<if test="isSend != null" > is_send = #{isSend,jdbcType=TINYINT}, </if>
			<if test="isRead != null" > is_read = #{isRead,jdbcType=TINYINT}, </if>
			<if test="isDel != null" > is_del = #{isDel,jdbcType=TINYINT}, </if>
			<if test="updatedTime != null" > updated_time = #{updatedTime,jdbcType=BIGINT}, </if>
		</set>
		<where>
			<trim prefixOverrides="and">
				<if test="id != null"> and id = #{id ,jdbcType=BIGINT} </if>
				<if test="ids != null">
					and id IN
					<foreach collection="ids" index="atem" item="atem" open="(" separator="," close=")">
						#{atem}
					</foreach>
				</if> 
				<if test="mid != null" > and mid = #{mid ,jdbcType=BIGINT}  </if>
				<if test="mids != null">
					and mid IN
					<foreach collection="mids" index="item" item="item" open="(" separator="," close=")">
						#{item}
					</foreach>
				</if> 
				<if test="uid != null" > and uid = #{uid ,jdbcType=BIGINT}  </if>

			</trim>
		</where>
	</update>
	
	
	
	
	
	
	<!-- 删除 -->
	<delete id="delete" parameterType="java.util.Map">
		delete from schedule_message_user
		<include refid="Base_Where_Clause" />
	</delete>
	
	
	
	<!-- 根据ID删除 -->
	<delete id="deleteById" parameterType="java.lang.Long">
		delete from schedule_message_user
		where id = #{id}
	</delete>




	<!-- 个人消息 列表查询  -->
	<select id="selectMuserAndMcontentList" resultMap="BaseResultMap" parameterType="java.util.Map">
		select
			mu.id, mu.mid, mu.uid, mu.type_role, mu.is_read,
			me.type, me.remrk_id, me.content , me.send_time 
		from 
			schedule_message_user mu ,schedule_message me
		where
			mu.mid = me.id
			<if test="uid != null" > and mu.uid = #{uid ,jdbcType=BIGINT}  </if>
			<if test="isUse != null" > and mu.is_use = #{isUse ,jdbcType=TINYINT}  </if>
			<if test="isDel != null" > and mu.is_del = #{isDel ,jdbcType=TINYINT}  </if>

			<if test="message.status != null" > and me.status = #{message.status ,jdbcType=TINYINT}  </if>
			
			<if test="property != null">order by ${property} ${direction}</if>
			<if test="offset != null and limit != null">
				limit #{offset}, #{limit}
			</if>
			
	</select>
	<!-- 查询总数 -->
	<select id="selectMuserAndMcontentCount" resultType="java.lang.Long" parameterType="java.util.Map">
		select 
			count(mu.id) 
		from 
			schedule_message_user mu ,schedule_message me
		where
			mu.mid = me.id
			<if test="uid != null" > and mu.uid = #{uid ,jdbcType=BIGINT}  </if>
			<if test="isUse != null" > and mu.is_use = #{isUse ,jdbcType=TINYINT}  </if>
			<if test="isDel != null" > and mu.is_del = #{isDel ,jdbcType=TINYINT}  </if>

			<if test="message.status != null" > and me.status = #{message.status ,jdbcType=TINYINT}  </if>
	</select>


	
</mapper>
	