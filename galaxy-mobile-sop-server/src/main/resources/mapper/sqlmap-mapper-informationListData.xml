<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.galaxyinternet.model.hologram.InformationListdata">

	<resultMap id="BaseResultMap" type="com.galaxyinternet.model.hologram.InformationListdata">

		<id column="id" 			jdbcType="BIGINT" 		property="id" />
		<result column="project_id" jdbcType="BIGINT" 		property="projectId" />
		<result column="title_id" 	jdbcType="BIGINT" 		property="titleId" />
		<result column="parent_id" 	jdbcType="BIGINT" 		property="parentId" />
		<result column="code" 		jdbcType="VARCHAR" 		property="code" />
		<result column="field_1" 	jdbcType="VARCHAR" 		property="field1" />
		<result column="field_2" 	jdbcType="VARCHAR" 		property="field2" />
		<result column="field_3" 	jdbcType="VARCHAR" 		property="field3" />
		<result column="field_4" 	jdbcType="VARCHAR" 		property="field4" />
		<result column="field_5" 	jdbcType="VARCHAR" 		property="field5" />
		<result column="field_6" 	jdbcType="VARCHAR" 		property="field6" />
		<result column="field_7" 	jdbcType="VARCHAR" 		property="field7" />
		<result column="field_8" 	jdbcType="VARCHAR" 		property="field8" />
		<result column="field_9" 	jdbcType="VARCHAR" 		property="field9" />
		<result column="field_10" 	jdbcType="VARCHAR" 		property="field10" />
		<result column="is_valid" 	jdbcType="INTEGER" 		property="isValid" />
		<result column="created_time" jdbcType="BIGINT" 	property="createdTime" />
		<result column="create_id" 	jdbcType="BIGINT" 		property="createId" />
		<result column="updated_time" jdbcType="BIGINT" 	property="updatedTime" />
		<result column="update_id" 	jdbcType="BIGINT" 		property="updateId" />
	</resultMap>
	
	<resultMap id="BaseResultMapTeam" type="com.galaxyinternet.model.hologram.InformationListdata">

		<id column="ld.id" 			jdbcType="BIGINT" 		property="id" />
		<result column="ld.project_id" jdbcType="BIGINT" 		property="projectId" />
		<result column="ld.title_id" 	jdbcType="BIGINT" 		property="titleId" />
		<result column="ld.parent_id" 	jdbcType="BIGINT" 		property="parentId" />
		<result column="ld.code" 		jdbcType="VARCHAR" 		property="code" />
		<result column="ld.field_1" 	jdbcType="VARCHAR" 		property="field1" />
		<result column="ld.field_2" 	jdbcType="VARCHAR" 		property="field2" />
		<result column="ld.field_3" 	jdbcType="VARCHAR" 		property="field3" />
		<result column="ld.field_4" 	jdbcType="VARCHAR" 		property="field4" />
		<result column="ld.field_5" 	jdbcType="VARCHAR" 		property="field5" />
		<result column="ld.field_6" 	jdbcType="VARCHAR" 		property="field6" />
		<result column="ld.field_7" 	jdbcType="VARCHAR" 		property="field7" />
		<result column="ld.field_8" 	jdbcType="VARCHAR" 		property="field8" />
		<result column="ld.field_9" 	jdbcType="VARCHAR" 		property="field9" />
		<result column="ld.field_10" 	jdbcType="VARCHAR" 		property="field10" />
		<result column="ld.is_valid" 	jdbcType="INTEGER" 		property="isValid" />
		<result column="ld.created_time" jdbcType="BIGINT" 	property="createdTime" />
		<result column="ld.create_id" 	jdbcType="BIGINT" 		property="createId" />
		<result column="ld.updated_time" jdbcType="BIGINT" 	property="updatedTime" />
		<result column="ld.update_id" 	jdbcType="BIGINT" 		property="updateId" />
	</resultMap>



	<sql id="Base_Column_List">
		id, project_id, title_id,parent_id, code,field_1, field_2, field_3, field_4, field_5,field_6,field_7,field_8,field_9,field_10, is_valid, created_time, create_id, updated_time, update_id
	</sql>



	<sql id="Base_Where_Clause">
		<where>
			<trim prefixOverrides="and">
				<if test="id != null"> and id = #{id,jdbcType=BIGINT} </if>
				<if test="projectId != null"> and project_id = #{projectId,jdbcType=BIGINT} </if>
				<if test="titleId != null"> and title_id = #{titleId,jdbcType=BIGINT} </if>
				<if test="parentId != null"> and parent_id = #{parentId,jdbcType=BIGINT} </if>
				<if test="code != null"> and code = #{code,jdbcType=VARCHAR} </if>
				<if test="field1 != null"> and field_1 = #{field1,jdbcType=VARCHAR} </if>
				<if test="field2 != null"> and field_2 = #{field2,jdbcType=VARCHAR} </if>
				<if test="field3 != null"> and field_3 = #{field3,jdbcType=VARCHAR} </if>
				<if test="field4 != null"> and field_4 = #{field4,jdbcType=VARCHAR} </if>
				<if test="field5 != null"> and field_5 = #{field5,jdbcType=VARCHAR} </if>
				<if test="field6 != null"> and field_6 = #{field6,jdbcType=VARCHAR} </if>
				<if test="field7 != null"> and field_7 = #{field7,jdbcType=VARCHAR} </if>
				<if test="field8 != null"> and field_8 = #{field8,jdbcType=VARCHAR} </if>
				<if test="field9 != null"> and field_9 = #{field9,jdbcType=VARCHAR} </if>
				<if test="field10 != null"> and field_10 = #{field10,jdbcType=VARCHAR} </if>
				<if test="isValid != null"> and is_valid = #{isValid,jdbcType=VARCHAR} </if>
				<if test="createdTime != null"> and created_time = #{createdTime,jdbcType=VARCHAR} </if>
				<if test="createId != null"> and create_id = #{createId,jdbcType=VARCHAR} </if>
				<if test="updatedTime != null"> and updated_time = #{updatedTime,jdbcType=VARCHAR} </if>
				<if test="updateId != null"> and update_id = #{updateId,jdbcType=VARCHAR} </if>
				<if test="titleIds != null">
					and title_id in 
					<foreach collection="titleIds" item="item" open="(" separator="," close=")">
					#{item}
					</foreach>
				</if>
				<if test="codes != null">
					and code in
					<foreach collection="codes" item="item" open="(" separator="," close=")">
						#{item}
					</foreach>
				</if>
				<if test="ids != null">
					and id in 
					<foreach collection="ids" item="item" open="(" separator="," close=")">
					#{item}
					</foreach>
				</if>
			</trim>
			
			<if test="sorting != null">order by ${sorting}</if>
			<if test="property != null">order by ${property} ${direction}</if>
			
			<if test="offset != null and limit != null">
				limit #{offset}, #{limit}
			</if>
		</where>
	</sql>
	
	
	<sql id="Base_WhereTeam_Clause">
		<where>
			<trim prefixOverrides="and">
				<if test="id != null"> and ld.id = #{id,jdbcType=BIGINT} </if>
				<if test="projectId != null"> and ld.project_id = #{projectId,jdbcType=BIGINT} </if>
				<if test="titleId != null"> and ld.title_id = #{titleId,jdbcType=BIGINT} </if>
				<if test="parentId != null"> and ld.parent_id = #{parentId,jdbcType=BIGINT} </if>
				<if test="code != null"> and ld.code = #{code,jdbcType=VARCHAR} </if>
				<if test="field1 != null"> and ld.field_1 = #{field1,jdbcType=VARCHAR} </if>
				<if test="field2 != null"> and ld.field_2 = #{field2,jdbcType=VARCHAR} </if>
				<if test="field3 != null"> and ld.field_3 = #{field3,jdbcType=VARCHAR} </if>
				<if test="field4 != null"> and ld.field_4 = #{field4,jdbcType=VARCHAR} </if>
				<if test="field5 != null"> and ld.field_5 = #{field5,jdbcType=VARCHAR} </if>
				<if test="field6 != null"> and ld.field_6 = #{field6,jdbcType=VARCHAR} </if>
				<if test="field7 != null"> and ld.field_7 = #{field7,jdbcType=VARCHAR} </if>
				<if test="field8 != null"> and ld.field_8 = #{field8,jdbcType=VARCHAR} </if>
				<if test="field9 != null"> and ld.field_9 = #{field9,jdbcType=VARCHAR} </if>
				<if test="field10 != null"> and ld.field_10 = #{field10,jdbcType=VARCHAR} </if>
				<if test="isValid != null"> and ld.is_valid = #{isValid,jdbcType=VARCHAR} </if>
				<if test="createdTime != null"> and ld.created_time = #{createdTime,jdbcType=VARCHAR} </if>
				<if test="createId != null"> and ld.create_id = #{createId,jdbcType=VARCHAR} </if>
				<if test="updatedTime != null"> and ld.updated_time = #{updatedTime,jdbcType=VARCHAR} </if>
				<if test="updateId != null"> and ld.update_id = #{updateId,jdbcType=VARCHAR} </if>
				<if test="titleIds != null">
					and ld.title_id in 
					<foreach collection="titleIds" item="item" open="(" separator="," close=")">
					#{item}
					</foreach>
				</if>
				<if test="codes != null">
					and ld.code in
					<foreach collection="codes" item="item" open="(" separator="," close=")">
						#{item}
					</foreach>
				</if>
				<if test="ids != null">
					and ld.id in 
					<foreach collection="ids" item="item" open="(" separator="," close=")">
					#{item}
					</foreach>
				</if>
			</trim>
			
			<if test="sorting != null">order by ${sorting}</if>
			<if test="property != null">order by ${property} ${direction}</if>
			
			<if test="offset != null and limit != null">
				limit #{offset}, #{limit}
			</if>
		</where>
	</sql>
	

	<insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="com.galaxyinternet.model.hologram.InformationListdata">
	    <![CDATA[
	     insert into information_listdata (
	     	id,
	     	project_id,
			title_id,
			parent_id,
			code, 
			field_1,
			field_2,
			field_3,
			field_4,
			field_5,
			field_6,
			field_7,
			field_8,
			field_9,
			field_10,
			is_valid, 
			created_time, 
			create_id, 
			updated_time, 
			update_id
		)
		values (
			#{id,jdbcType=BIGINT},
			#{projectId,jdbcType=BIGINT},
			#{titleId,jdbcType=BIGINT},
			#{parentId,jdbcType=BIGINT},
			#{code,jdbcType=VARCHAR}, 
			#{field1,jdbcType=VARCHAR},
			#{field2,jdbcType=VARCHAR},
			#{field3,jdbcType=VARCHAR},
			#{field4,jdbcType=VARCHAR},
			#{field5,jdbcType=VARCHAR},
			#{field6,jdbcType=VARCHAR},
			#{field7,jdbcType=VARCHAR},
			#{field8,jdbcType=VARCHAR},
			#{field9,jdbcType=VARCHAR},
			#{field10,jdbcType=VARCHAR},
			#{isValid,jdbcType=INTEGER}, 
			#{createdTime,jdbcType=BIGINT}, 
			#{createId,jdbcType=BIGINT}, 
			#{updatedTime,jdbcType=BIGINT}, 
			#{updateId,jdbcType=BIGINT}
		)
	    ]]>
	</insert>
	

	<!-- 查询总数 -->
	<select id="selectCount" resultType="java.lang.Long" parameterType="java.util.Map">
		select count(id) from information_listdata
		<include refid="Base_Where_Clause" />
	</select>



	<!-- 查询 -->
	<select id="select" resultMap="BaseResultMap" parameterType="java.util.Map">
		
		<!-- select <include refid="Base_Column_List" />
		from information_listdata -->
		SELECT  ld.id, ld.project_id, ld.title_id,ld.parent_id, ld.code,
				CASE
				WHEN (ld.title_id=1908) THEN d7.name
				else ld.field_1
				end field_1,
				CASE
				WHEN (ld.title_id=1303 and ld.code='team-members') THEN d1.name
				else ld.field_2
				end field_2,
				CASE
				WHEN (ld.title_id=1303 and ld.code='team-members') THEN d2.name
				WHEN (ld.title_id=1906) THEN d6.name
				else ld.field_3
				end field_3,
				CASE
				WHEN (ld.title_id=1303 and ld.code='study-experience') THEN d4.name
				else ld.field_4
				end field_4,
				CASE
				WHEN (ld.title_id=1303 and ld.code='team-members') THEN d3.name
				WHEN (ld.title_id=1548) THEN d5.name
				else ld.field_5
				end field_5,
				ld.field_6,ld.field_7,ld.field_8,
				ld.field_9,ld.field_10, ld.is_valid, ld.created_time, ld.create_id, ld.updated_time, ld.update_id
				FROM information_listdata ld
				LEFT JOIN information_dictionary d1 on ld.field_2 = d1.id and ld.title_id=1303 and ld.code='team-members'
				LEFT JOIN information_dictionary d2 on ld.field_3 = d2.id and ld.title_id=1303 and ld.code='team-members'
				LEFT JOIN information_dictionary d3 on ld.field_5 = d3.id and ld.title_id=1303 and ld.code='team-members'
				LEFT JOIN information_dictionary d4 on ld.field_4 = d4.id and ld.title_id=1303 and ld.code='study-experience'
				LEFT JOIN information_dictionary d5 on ld.field_5 = d5.id and ld.title_id=1548 
				LEFT JOIN information_dictionary d6 on ld.field_3 = d6.id and ld.title_id=1906
				LEFT JOIN information_dictionary d7 on ld.field_1 = d7.id and ld.title_id=1908 
		<include refid="Base_WhereTeam_Clause" />
	</select>


	<!-- 根据ID查询 -->
	<select id="selectById" resultMap="BaseResultMap" parameterType="java.lang.Long">
		<!-- select
		<include refid="Base_Column_List" />
		from information_listdata -->
		SELECT  ld.id, ld.project_id, ld.title_id,ld.parent_id, ld.code,
				CASE
				WHEN (ld.title_id=1908) THEN d7.name
				else ld.field_1
				end field_1,
				CASE
				WHEN (ld.title_id=1303 and ld.code='team-members') THEN d1.name
				else ld.field_2
				end field_2,
				CASE
				WHEN (ld.title_id=1303 and ld.code='team-members') THEN d2.name
				WHEN (ld.title_id=1906) THEN d6.name
				else ld.field_3
				end field_3,
				CASE
				WHEN (ld.title_id=1303 and ld.code='study-experience') THEN d4.name
				else ld.field_4
				end field_4,
				CASE
				WHEN (ld.title_id=1303 and ld.code='team-members') THEN d3.name
				WHEN (ld.title_id=1548) THEN d5.name
				else ld.field_5
				end field_5,
				ld.field_6,ld.field_7,ld.field_8,
				ld.field_9,ld.field_10, ld.is_valid, ld.created_time, ld.create_id, ld.updated_time, ld.update_id
				FROM information_listdata ld
				LEFT JOIN information_dictionary d1 on ld.field_2 = d1.id and ld.title_id=1303 and ld.code='team-members'
				LEFT JOIN information_dictionary d2 on ld.field_3 = d2.id and ld.title_id=1303 and ld.code='team-members'
				LEFT JOIN information_dictionary d3 on ld.field_5 = d3.id and ld.title_id=1303 and ld.code='team-members'
				LEFT JOIN information_dictionary d4 on ld.field_4 = d4.id and ld.title_id=1303 and ld.code='study-experience'
				LEFT JOIN information_dictionary d5 on ld.field_5 = d5.id and ld.title_id=1548 
				LEFT JOIN information_dictionary d6 on ld.field_3 = d6.id and ld.title_id=1906
				LEFT JOIN information_dictionary d7 on ld.field_1 = d7.id and ld.title_id=1908 
		where id = #{id}
	</select>
	
	
	<!-- 通过ID更新 -->
	<update id="updateById" parameterType="com.galaxyinternet.model.hologram.InformationDictionary">
		update information_listdata
		<set>
			<if test="titleId != null"> title_id = #{titleId,jdbcType=BIGINT}, </if>
			<if test="parentId != null"> parent_id = #{parentId,jdbcType=BIGINT}, </if>
			<if test="code != null"> code = #{code,jdbcType=VARCHAR}, </if>
			<if test="field1 != null"> field_1 = #{field1,jdbcType=VARCHAR}, </if>
			<if test="field2 != null"> field_2 = #{field2,jdbcType=VARCHAR}, </if>
			<if test="field3 != null"> field_3 = #{field3,jdbcType=VARCHAR}, </if>
			<if test="field4 != null"> field_4 = #{field4,jdbcType=VARCHAR}, </if>
			<if test="field5 != null"> field_5 = #{field5,jdbcType=VARCHAR}, </if>
			<if test="field6 != null"> field_6 = #{field6,jdbcType=VARCHAR}, </if>
			<if test="field7 != null"> field_7 = #{field7,jdbcType=VARCHAR}, </if>
			<if test="field8 != null"> field_8 = #{field8,jdbcType=VARCHAR}, </if>
			<if test="field9 != null"> field_9 = #{field9,jdbcType=VARCHAR}, </if>
			<if test="field10 != null"> field_10 = #{field10,jdbcType=VARCHAR}, </if>
			<if test="isValid != null"> is_valid = #{isValid,jdbcType=VARCHAR}, </if>
			<if test="createdTime != null"> created_time = #{createdTime,jdbcType=VARCHAR}, </if>
			<if test="createId != null"> create_id = #{createId,jdbcType=VARCHAR}, </if>
			<if test="updatedTime != null"> updated_time = #{updatedTime,jdbcType=VARCHAR}, </if>
			<if test="updateId != null"> update_id = #{updateId,jdbcType=VARCHAR} </if>
		</set>
		where id = #{id}
	</update>
	

	
	<!-- 删除 -->
	<delete id="delete" parameterType="java.util.Map">
		delete from information_listdata
		<include refid="Base_Where_Clause" />
	</delete>
	
	
	
	<!-- 根据ID删除 -->
	<delete id="deleteById" parameterType="java.lang.Long">
		delete from information_listdata
		where id = #{id}
	</delete>
</mapper>
	