<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.galaxyinternet.rili.model.SchedulePersonPlan">

  <resultMap id="BaseResultMap" type="com.galaxyinternet.rili.model.SchedulePersonPlan">
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="schedule_id" property="scheduleId" jdbcType="BIGINT" />
    <result column="contacts_id" property="contactsId" jdbcType="BIGINT" />
    <result column="created_time" property="createdTime" jdbcType="BIGINT" />
    <result column="created_id" property="createdId" jdbcType="BIGINT" />
    <result column="updated_time" property="updatedTime" jdbcType="BIGINT" />
    <result column="updated_id" property="updatedId" jdbcType="BIGINT" />
  </resultMap>
  
  
  
  <sql id="Base_Column_List" >
   id, schedule_id, contacts_id, created_time, created_id, updated_time, updated_id
  </sql>
	
	<sql id="Base_Where_Clause">
		<where>
			<trim prefixOverrides="and">
				<if test="id != null"> and id =#{id}</if>
				<if test="scheduleId != null"> and schedule_id = #{scheduleId,jdbcType=BIGINT} </if>
				<if test="contactsId != null"> and contacts_id = #{contactsId,jdbcType=BIGINT} </if>			
				<if test="createdTime != null"> and created_time = #{createdTime,jdbcType=BIGINT} </if>		
				<if test="createdId != null"> and created_id = #{createdId,jdbcType=BIGINT} </if>	
				<if test="updatedTime != null"> and updated_time = #{updatedTime,jdbcType=BIGINT} </if>
				<if test="updatedId != null"> and updated_id = #{updatedId,jdbcType=BIGINT} </if>

			</trim>
		</where>
		<if test="sorting != null">order by ${sorting}</if>
		<if test="offset != null and limit != null">
			limit #{offset}, #{limit}
		</if>
	</sql>




	<insert id="insert"  useGeneratedKeys="true" keyProperty="id" parameterType="com.galaxyinternet.rili.model.SchedulePersonPlan">
	    insert into schedule_person_plan (id, schedule_id, contacts_id, 
	      created_time, created_id, updated_time, 
	      updated_id)
	    values (#{id,jdbcType=BIGINT}, #{scheduleId,jdbcType=BIGINT}, #{contactsId,jdbcType=BIGINT}, 
	      #{createdTime,jdbcType=BIGINT}, #{createdId,jdbcType=BIGINT}, #{updatedTime,jdbcType=BIGINT}, 
	      #{updatedId,jdbcType=BIGINT})
	</insert>

	<!-- 根据ID查询 -->
	<select id="selectById" parameterType="java.lang.Long" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from schedule_person_plan
		where id = #{id,jdbcType=BIGINT}
	</select>

	<!-- 查询 -->
	<select id="select" resultMap="BaseResultMap" parameterType="java.util.Map">
		select
		<include refid="Base_Column_List" />
		from schedule_person_plan
		<include refid="Base_Where_Clause" />
	</select>

	<!-- 查询总数 -->
	<select id="selectCount" resultType="java.lang.Long" parameterType="java.util.Map">
		select count(id) from schedule_person_plan
		<include refid="Base_Where_Clause" />
	</select>

	<!-- 删除 -->
	<delete id="delete" parameterType="java.util.Map">
		delete from schedule_person_plan
		<include refid="Base_Where_Clause" />
	</delete>

	<!-- 根据ID删除 -->
	<delete id="deleteById" parameterType="java.lang.Long">
		delete from schedule_person_plan
		where id = #{id,jdbcType=BIGINT}
	</delete>


	<update id="updateById" parameterType="com.galaxyinternet.rili.model.SchedulePersonPlan">
		update schedule_person_plan
		  <if test="scheduleId != null" > schedule_id = #{scheduleId,jdbcType=BIGINT}, </if>
	      <if test="contactsId != null" > contacts_id = #{contactsId,jdbcType=BIGINT}, </if>
	      <if test="createdId != null" > created_id = #{createdId,jdbcType=BIGINT}, </if>
	      <if test="updatedTime != null" > updated_time = #{updatedTime,jdbcType=BIGINT}, </if>
	      <if test="updatedId != null" > updated_id = #{updatedId,jdbcType=BIGINT}, </if>
	      <if test="createdTime != null" > created_time = #{createdTime,jdbcType=BIGINT}  </if>
		where id = #{id,jdbcType=BIGINT}
	</update>
 
  <!-- 更新 -->
	<update id="updateByIdSelective" parameterType="com.galaxyinternet.rili.model.SchedulePersonPlan">
		update schedule_person_plan
		<set>
		  <if test="scheduleId != null" > schedule_id = #{scheduleId,jdbcType=BIGINT}, </if>
	      <if test="contactsId != null" > contacts_id = #{contactsId,jdbcType=BIGINT}, </if>
	      <if test="createdId != null" > created_id = #{createdId,jdbcType=BIGINT}, </if>
	      <if test="updatedTime != null" > updated_time = #{updatedTime,jdbcType=BIGINT}, </if>
	      <if test="updatedId != null" > updated_id = #{updatedId,jdbcType=BIGINT}, </if>
	      <if test="createdTime != null" > created_time = #{createdTime,jdbcType=BIGINT}  </if>
		</set>
		<where>
			<trim prefixOverrides="and">
				<if test="id != null"> and id =#{id}</if>
				<if test="scheduleId != null"> and schedule_id = #{scheduleId,jdbcType=BIGINT} </if>
				<if test="contactsId != null"> and contacts_id = #{contactsId,jdbcType=BIGINT} </if>			
				<if test="createdTime != null"> and created_time = #{createdTime,jdbcType=BIGINT} </if>		
				<if test="createdId != null"> and created_id = #{createdId,jdbcType=BIGINT} </if>	
				<if test="updatedTime != null"> and updated_time = #{updatedTime,jdbcType=BIGINT} </if>
				<if test="updatedId != null"> and updated_id = #{updatedId,jdbcType=BIGINT} </if>
			</trim>
		</where>
	</update>
 	<select id="selectCountsId" resultType="java.lang.Long" parameterType="java.util.Map">
		SELECT contacts_id 
			FROM schedule_person_plan
		 WHERE schedule_id = #{scheduleId,jdbcType=BIGINT}
	 	
	</select>
 	
 
 
  	<select id="queryByCountsId" resultType="com.galaxyinternet.rili.model.ScheduleContacts" parameterType="java.util.Map">
		SELECT scs.* 
			FROM  schedule_contacts scs,`schedule_person_plan`spp
		 WHERE 
		 	  scs.id=spp.contacts_id
	     AND spp.schedule_id = #{scheduleId,jdbcType=BIGINT}
	 	
	</select>
 
 
</mapper>

