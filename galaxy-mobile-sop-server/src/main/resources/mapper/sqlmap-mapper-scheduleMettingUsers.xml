<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.galaxyinternet.rili.model.ScheduleMettingUsers">

  <resultMap id="BaseResultMap" type="com.galaxyinternet.rili.model.ScheduleMettingUsers">
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="schedule_id" property="scheduleId" jdbcType="BIGINT" />
    <result column="user_id" property="userId" jdbcType="BIGINT" />
    <result column="user_name" property="userName" jdbcType="VARCHAR" />
    <result column="department_id" property="departmentId" jdbcType="BIGINT" />
    <result column="message_state" property="messageState" jdbcType="TINYINT" />
    <result column="reject_cause" property="rejectCause" jdbcType="VARCHAR" />
    <result column="created_id" property="createdId" jdbcType="BIGINT" />
    <result column="updated_time" property="updatedTime" jdbcType="BIGINT" />
    <result column="updated_id" property="updatedId" jdbcType="BIGINT" />
    <result column="created_time" property="createdTime" jdbcType="BIGINT" />
  </resultMap>
  
  
  
  <sql id="Base_Column_List" >
   id, schedule_id, user_id, user_name, department_id, message_state, reject_cause, created_id, 
    updated_time, updated_id, created_time
  </sql>
	
	<sql id="Base_Where_Clause">
		<where>
			<trim prefixOverrides="and">
				<if test="id != null"> and id =#{id}</if>
				<if test="scheduleId != null"> and schedule_id = #{scheduleId,jdbcType=BIGINT} </if>
				<if test="userId != null"> and user_id = #{userId,jdbcType=BIGINT} </if>
				<if test="userName != null"> and user_name = #{userName,jdbcType=VARCHAR} </if>			
				<if test="departmentId != null"> and department_id = #{departmentId,jdbcType=BIGINT} </if>
				<if test="messageState != null"> and message_state = #{messageState,jdbcType=TINYINT} </if>
				<if test="rejectCause != null"> and reject_cause = #{rejectCause,jdbcType=VARCHAR} </if>
				<if test="createdTime != null"> and created_time = #{createdTime,jdbcType=BIGINT} </if>		
				<if test="createdId != null"> and created_id = #{createdId,jdbcType=BIGINT} </if>	
				<if test="updatedTime != null"> and updated_time = #{updatedTime,jdbcType=BIGINT} </if>
				<if test="updatedId != null"> and updated_id = #{updatedId,jdbcType=BIGINT} </if>

			</trim>
		</where>
		<if test="sorting != null">order by ${sorting}</if>
		<if test="offset != null and limit != null">
			limit #{offset}, #{limit}
		</if>
	</sql>




	<insert id="insert"  useGeneratedKeys="true" keyProperty="id" parameterType="com.galaxyinternet.rili.model.ScheduleMettingUsers">
		 insert into schedule_metting_users (id, schedule_id, user_id, user_name,
		      department_id, message_state, reject_cause, 
		      created_id, updated_time, updated_id, 
		      created_time)
		 values (#{id,jdbcType=BIGINT}, #{scheduleId,jdbcType=BIGINT}, #{userId,jdbcType=BIGINT}, #{userName,jdbcType=VARCHAR},
		      #{departmentId,jdbcType=BIGINT}, #{messageState,jdbcType=TINYINT}, #{rejectCause,jdbcType=VARCHAR}, 
		      #{createdId,jdbcType=BIGINT}, #{updatedTime,jdbcType=BIGINT}, #{updatedId,jdbcType=BIGINT}, 
		      #{createdTime,jdbcType=BIGINT})
	</insert>
	
	<insert id="insertBatch" parameterType="java.util.List">
			insert into schedule_metting_users (
				schedule_id,
				 user_id,
				 user_name,
		       department_id, 
		       message_state,
		       reject_cause, 
		       created_id,
		       updated_time,
		       updated_id, 
		      created_time
			)
			values 
			<foreach collection="list" item="item" separator=",">
				(
					
					#{item.scheduleId,jdbcType=BIGINT},
					#{item.userId,jdbcType=BIGINT},
					#{item.userName,jdbcType=VARCHAR}, 
					#{item.departmentId,jdbcType=BIGINT}, 
					#{item.messageState,jdbcType=TINYINT}, 
					#{item.rejectCause,jdbcType=VARCHAR}, 
					#{item.createdId,jdbcType=BIGINT},
					#{item.updatedTime,jdbcType=BIGINT}, 
					#{item.updatedId,jdbcType=BIGINT}, 
					#{item.createdTime,jdbcType=BIGINT}
				)
			</foreach>
			
		</insert>
	
	<!-- 根据ID查询 -->
	<select id="selectById" parameterType="java.lang.Long" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from schedule_metting_users
		where id = #{id,jdbcType=BIGINT}
	</select>

	<!-- 查询 -->
	<select id="select" resultMap="BaseResultMap" parameterType="java.util.Map">
		select
		<include refid="Base_Column_List" />
		from schedule_metting_users
		<include refid="Base_Where_Clause" />
	</select>

	<!-- 查询总数 -->
	<select id="selectCount" resultType="java.lang.Long" parameterType="java.util.Map">
		select count(id) from schedule_metting_users
		<include refid="Base_Where_Clause" />
	</select>

	<!-- 删除 -->
	<delete id="delete" parameterType="java.util.Map">
		delete from schedule_metting_users
		<include refid="Base_Where_Clause" />
	</delete>

	<!-- 根据ID删除 -->
	<delete id="deleteById" parameterType="java.lang.Long">
		delete from schedule_metting_users
		where id = #{id,jdbcType=BIGINT}
	</delete>


	<update id="updateById" parameterType="com.galaxyinternet.rili.model.ScheduleMettingUsers">
		update schedule_metting_users
		  <if test="scheduleId != null" > schedule_id = #{scheduleId,jdbcType=BIGINT}, </if>
	      <if test="userId != null" > user_id = #{userId,jdbcType=BIGINT}, </if>
	      <if test="userName != null" > user_name = #{userName,jdbcType=VARCHAR}, </if>
	      <if test="departmentId != null" > department_id = #{departmentId,jdbcType=BIGINT}, </if>
	      <if test="messageState != null" > message_state = #{messageState,jdbcType=TINYINT}, </if>
	      <if test="rejectCause != null" > reject_cause = #{rejectCause,jdbcType=VARCHAR}, </if>
	      <if test="createdId != null" > created_id = #{createdId,jdbcType=BIGINT}, </if>
	      <if test="updatedTime != null" > updated_time = #{updatedTime,jdbcType=BIGINT}, </if>
	      <if test="updatedId != null" > updated_id = #{updatedId,jdbcType=BIGINT}, </if>
	      <if test="createdTime != null" > created_time = #{createdTime,jdbcType=BIGINT}  </if>
		where id = #{id,jdbcType=BIGINT}
	</update>
 
  <!-- 更新 -->
	<update id="updateByIdSelective" parameterType="com.galaxyinternet.rili.model.ScheduleMettingUsers">
		update schedule_metting_users
		<set>
		      <if test="scheduleId != null" > schedule_id = #{scheduleId,jdbcType=BIGINT}, </if>
		      <if test="userId != null" > user_id = #{userId,jdbcType=BIGINT}, </if>
		      <if test="userName != null" > user_name = #{userName,jdbcType=VARCHAR}, </if>
		      <if test="departmentId != null" > department_id = #{departmentId,jdbcType=BIGINT}, </if>
		      <if test="messageState != null" > message_state = #{messageState,jdbcType=TINYINT}, </if>
		      <if test="rejectCause != null" > reject_cause = #{rejectCause,jdbcType=VARCHAR}, </if>
		      <if test="createdId != null" > created_id = #{createdId,jdbcType=BIGINT}, </if>
		      <if test="updatedTime != null" > updated_time = #{updatedTime,jdbcType=BIGINT}, </if>
		      <if test="updatedId != null" > updated_id = #{updatedId,jdbcType=BIGINT}, </if>
		      <if test="createdTime != null" > created_time = #{createdTime,jdbcType=BIGINT}  </if>
		</set>
		<where>
			<trim prefixOverrides="and">
				<if test="id != null"> and id =#{id}</if>
				<if test="scheduleId != null"> and schedule_id = #{scheduleId,jdbcType=BIGINT} </if>
				<if test="userId != null"> and user_id = #{userId,jdbcType=BIGINT} </if>
				<if test="userName != null"> and user_name = #{userName,jdbcType=VARCHAR} </if>				
				<if test="departmentId != null"> and department_id = #{departmentId,jdbcType=BIGINT} </if>
				<if test="messageState != null"> and message_state = #{messageState,jdbcType=TINYINT} </if>
				<if test="rejectCause != null"> and reject_cause = #{rejectCause,jdbcType=VARCHAR} </if>
				<if test="createdTime != null"> and created_time = #{createdTime,jdbcType=BIGINT} </if>		
				<if test="createdId != null"> and created_id = #{createdId,jdbcType=BIGINT} </if>	
				<if test="updatedTime != null"> and updated_time = #{updatedTime,jdbcType=BIGINT} </if>
				<if test="updatedId != null"> and updated_id = #{updatedId,jdbcType=BIGINT} </if>
			</trim>
		</where>
	</update>
 	<select id="selectByCount" resultType="com.galaxyinternet.rili.util.Receipt" parameterType="java.util.Map">
		SELECT  message_state AS code,
				COUNT(id)AS receiptCount  
		
			FROM schedule_metting_users smu 
		WHERE 		
			smu.schedule_id = #{scheduleId,jdbcType=BIGINT}
		
		GROUP BY message_state
	</select>
 
 
 
</mapper>

