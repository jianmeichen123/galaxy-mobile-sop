<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.galaxyinternet.model.feedback.Feedback">
	<resultMap id="BaseResultMap" type="com.galaxyinternet.model.feedback.Feedback">
		<result column="username" 			property="username" 		 	/>
		<result column="content" 			property="content" 		 	/>
		<result column="created_date" 		property="createdDate" 	/>
	</resultMap>
 	<insert id="insert" parameterType="com.galaxyinternet.model.feedback.Feedback" useGeneratedKeys="true" keyProperty="id">
	    <![CDATA[
	        insert into
	        sop_feedback (
        	  id,
        	  content,
        	  created_uid,
           	  created_date
	        ) values (
        	   #{id},
        	   #{content},
        	   #{createdUid},
        	   #{createdDate}
	        )
	    ]]>
    </insert>
    
    <!-- 查询 -->
	<select id="select" resultMap="BaseResultMap" parameterType="java.util.Map">
		select feedback.created_date,feedback.content,user.real_name as username
		from sop_feedback feedback,platform_user user where feedback.created_uid = user.id
		order by feedback.created_date desc
		<if test="offset != null and limit != null">
			limit #{offset}, #{limit}
		</if> 
	</select>
	
		<!-- 查询总数 -->
	<select id="selectCount" resultType="java.lang.Long" parameterType="java.util.Map">
		select count(id) from sop_feedback
	</select>
</mapper>